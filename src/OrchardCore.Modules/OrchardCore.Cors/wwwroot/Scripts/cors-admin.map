{"version":3,"sources":["<anon>"],"sourcesContent":["var optionsList = Vue.component('options-list',\r\n    {\r\n        props: ['options', 'optionType', 'title', 'subTitle'],\r\n        template: '#options-list',\r\n        data: function () {\r\n            return {\r\n                'newOption': ''\r\n            };\r\n        },\r\n        methods: {\r\n            addOption: function (value) {\r\n                if (value !== null && value !== '') {\r\n                    var noDuplicates = ($.inArray(value.toLowerCase(), this.options.map(o => o.toLowerCase())) < 0);\r\n                    if (noDuplicates) {\r\n                        this.options.push(value);\r\n                    }\r\n                }\r\n            },\r\n            deleteOption: function (value) {\r\n                this.options.splice($.inArray(value, this.options), 1);\r\n            }\r\n        }\r\n    });\r\n\r\nvar policyDetails = Vue.component('policy-details',\r\n    {\r\n        components: { optionsList: optionsList },\r\n        props: ['policy'],\r\n        template: '#policy-details'\r\n    });\r\n\r\nvar corsApp = new Vue({\r\n    el: '#corsAdmin',\r\n    components: { policyDetails: policyDetails, optionsList: optionsList },\r\n    data: {\r\n        selectedPolicy: null,\r\n        policies: null,\r\n        defaultPolicyName: null\r\n    },\r\n    updated: function () {\r\n        this.searchBox();\r\n    },\r\n    methods: {\r\n        newPolicy: function () {\r\n            this.selectedPolicy = {\r\n                name: 'New policy',\r\n                allowedOrigins: [],\r\n                allowAnyOrigin: true,\r\n                allowedMethods: [],\r\n                allowAnyMethod: true,\r\n                allowedHeaders: [],\r\n                allowAnyHeader: true,\r\n                allowCredentials: true,\r\n                isDefaultPolicy: false,\r\n                exposedHeaders: []\r\n            };\r\n        },\r\n        editPolicy: function (policy) {\r\n            this.selectedPolicy = Object.assign({}, policy);\r\n            this.selectedPolicy.originalName = this.selectedPolicy.name;\r\n        },\r\n        deletePolicy: function (policy, event) {\r\n            this.selectedPolicy = null;\r\n            var policyToRemove = this.policies.filter(function (item) { return item.name === policy.name; });\r\n            if (policyToRemove.length > 0)\r\n                this.policies.splice($.inArray(policyToRemove[0], this.policies), 1);\r\n            event.stopPropagation();\r\n            this.save();\r\n        },\r\n        updatePolicy: function (policy, event) {\r\n            if (policy.isDefaultPolicy) {\r\n                this.policies.forEach(p => p.isDefaultPolicy = false);\r\n            }\r\n\r\n            if (policy.originalName) {\r\n                var policyIndex = this.policies.findIndex((oldPolicy) => oldPolicy.name === policy.originalName);\r\n                this.policies[policyIndex] = policy;\r\n            }\r\n            else {\r\n                this.policies.push(policy);\r\n            }\r\n\r\n            this.save();\r\n            this.back();\r\n        },\r\n        save: function () {\r\n            document.getElementById('corsSettings').value = JSON.stringify(this.policies);\r\n            document.getElementById('corsForm').submit();\r\n        },\r\n        back: function () {\r\n            this.selectedPolicy = null;\r\n        },\r\n        searchBox: function () {\r\n            var searchBox = $('#search-box');\r\n\r\n            // On Enter, edit the item if there is a single one\r\n            searchBox.keypress(function (event) {\r\n                if (event.which == 13) {\r\n\r\n                    // Edit the item if there is a single filtered element\r\n                    var visible = $('#corsAdmin > ul > li:visible');\r\n                    if (visible.length == 1) {\r\n                        window.location = visible.find('.edit').attr('href');\r\n                    }\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            // On each keypress filter the list\r\n            searchBox.keyup(function (e) {\r\n                var search = $(this).val().toLowerCase();\r\n                var elementsToFilter = $(\"[data-filter-value]\");\r\n\r\n                // On ESC, clear the search box and display all\r\n                if (e.keyCode == 27 || search == '') {\r\n                    searchBox.val('');\r\n                    elementsToFilter.toggle(true);\r\n                    $('#list-alert').addClass(\"d-none\");\r\n                }\r\n                else {\r\n                    var intVisible = 0;\r\n                    elementsToFilter.each(function () {\r\n                        var text = $(this).data('filter-value').toLowerCase();\r\n                        var found = text.indexOf(search) > -1;\r\n                        $(this).toggle(found);\r\n\r\n                        if (found) {\r\n                            intVisible++;\r\n                        }\r\n                    });\r\n\r\n                    // We display an alert if a search is not found\r\n                    if (intVisible == 0) {\r\n                        $('#list-alert').removeClass(\"d-none\");\r\n                    }\r\n                    else {\r\n                        $('#list-alert').addClass(\"d-none\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n});\r\n"],"names":["optionsList","Vue","component","props","template","data","methods","addOption","value","$","inArray","toLowerCase","options","map","o","push","deleteOption","splice","policyDetails","components","corsApp","el","selectedPolicy","policies","defaultPolicyName","updated","searchBox","newPolicy","name","allowedOrigins","allowAnyOrigin","allowedMethods","allowAnyMethod","allowedHeaders","allowAnyHeader","allowCredentials","isDefaultPolicy","exposedHeaders","editPolicy","policy","Object","assign","originalName","deletePolicy","event","policyToRemove","filter","item","length","stopPropagation","save","updatePolicy","forEach","p","policyIndex","findIndex","oldPolicy","back","document","getElementById","JSON","stringify","submit","keypress","which","visible","window","location","find","attr","keyup","e","search","val","elementsToFilter","keyCode","toggle","addClass","intVisible","each","found","text","indexOf","removeClass"],"mappings":"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"}asd