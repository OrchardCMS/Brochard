{"version":3,"sources":["<anon>"],"sourcesContent":["urlRewritingAdmin = function () {\r\n\r\n    const initialize = (url, errorLabel, selectedLabel) => {\r\n\r\n        // Create the sortable UI.\r\n        sortingListManager.create('#rewrite-rules-sortable-list', url, errorLabel);\r\n\r\n        let searchBox = document.getElementById('search-box');\r\n        let searchAlert = document.getElementById('list-alert');\r\n\r\n        const filterElements = document.querySelectorAll('[data-filter-value]');\r\n\r\n        // If the user press Enter, don't submit.\r\n        searchBox.addEventListener('keydown', function (e) {\r\n            if (e.key === 'Enter') {\r\n                e.preventDefault();\r\n            }\r\n        });\r\n\r\n        searchBox.addEventListener('keyup', e => {\r\n\r\n            var search = e.target.value.toLowerCase();\r\n            // On ESC, clear the search box and display all rules.\r\n            if (e.key == 'Escape' || search == '') {\r\n                searchAlert.classList.add('d-none');\r\n                searchBox.value = '';\r\n                for (let i = 0; i < filterElements.length; i++) {\r\n                    filterElements[i].classList.remove(\"d-none\");\r\n                    filterElements[i].classList.remove(\"first-child-visible\");\r\n                    filterElements[i].classList.remove(\"last-child-visible\");\r\n                }\r\n\r\n                if (filterElements.length > 0) {\r\n                    filterElements[0].classList.add('first-child-visible');\r\n                    filterElements[filterElements.length - 1].classList.add('last-child-visible');\r\n                }\r\n            } else {\r\n                let visibleElements = [];\r\n                for (let i = 0; i < filterElements.length; i++) {\r\n                    let filter = filterElements[i];\r\n\r\n                    var text = filter.getAttribute('data-filter-value');\r\n\r\n                    if (!text) {\r\n                        filter.classList.add(\"d-none\");\r\n                        continue;\r\n                    }\r\n\r\n                    var found = text.indexOf(search) > -1;\r\n\r\n                    if (found) {\r\n                        filter.classList.remove(\"d-none\");\r\n                        filter.classList.remove(\"first-child-visible\");\r\n                        filter.classList.remove(\"last-child-visible\");\r\n                        visibleElements.push(filter);\r\n                    } else {\r\n                        filter.classList.add(\"d-none\");\r\n                    }\r\n                }\r\n\r\n                if (visibleElements.length > 0) {\r\n                    visibleElements[0].classList.add('first-child-visible');\r\n                    visibleElements[visibleElements.length - 1].classList.add('last-child-visible');\r\n                    searchAlert.classList.add('d-none');\r\n                } else {\r\n                    searchAlert.classList.remove('d-none');\r\n                }\r\n            }\r\n        });\r\n\r\n        var actions = document.getElementById('actions');\r\n        var items = document.getElementById('items');\r\n        var filters = document.querySelectorAll('.filter');\r\n        var selectAllCtrl = document.getElementById('select-all');\r\n        var selectedItems = document.getElementById('selected-items');\r\n        var itemsCheckboxes = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']\");\r\n\r\n        function displayActionsOrFilters() {\r\n            // Select all checked checkboxes with name 'ruleIds'\r\n            var checkedCheckboxes = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\");\r\n\r\n            if (checkedCheckboxes.length > 1) {\r\n                actions.classList.remove('d-none');\r\n                for (let i = 0; i < filters.length; i++) {\r\n                    filters[i].classList.add('d-none');\r\n                }\r\n                selectedItems.classList.remove('d-none');\r\n                items.classList.add('d-none');\r\n            } else {\r\n                actions.classList.add('d-none');\r\n\r\n                for (let i = 0; i < filters.length; i++) {\r\n                    filters[i].classList.remove('d-none');\r\n                }\r\n                selectedItems.classList.add('d-none');\r\n                items.classList.remove('d-none');\r\n            }\r\n        }\r\n\r\n        var dropdownItems = document.querySelectorAll(\".dropdown-menu .dropdown-item\");\r\n\r\n        // Add click event listeners to each dropdown item\r\n        dropdownItems.forEach(function (item) {\r\n            // Check if the item has a data-action attribute\r\n            if (item.dataset.action) {\r\n                item.addEventListener(\"click\", function () {\r\n                    // Get all checked checkboxes\r\n                    var checkedCheckboxes = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\");\r\n\r\n                    // Check if more than one checkbox is checked\r\n                    if (checkedCheckboxes.length > 1) {\r\n                        // Get data attributes from the clicked item\r\n                        var actionData = Object.assign({}, item.dataset);\r\n\r\n                        confirmDialog({\r\n                            ...actionData,\r\n                            callback: function (r) {\r\n                                if (r) {\r\n                                    // Set the value of the BulkAction option\r\n                                    document.querySelector(\"[name='Options.BulkAction']\").value = actionData.action;\r\n                                    // Trigger the submit action\r\n                                    document.querySelector(\"[name='submit.BulkAction']\").click();\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        selectAllCtrl.addEventListener(\"click\", function () {\r\n            itemsCheckboxes.forEach(function (checkbox) {\r\n                if (checkbox !== selectAllCtrl) {\r\n                    checkbox.checked = selectAllCtrl.checked; // Set the checked state of all checkboxes\r\n                }\r\n            });\r\n\r\n            // Update the selected items text\r\n            updateSelectedItemsText();\r\n            displayActionsOrFilters();\r\n        });\r\n\r\n        // Event listener for individual checkboxes\r\n        itemsCheckboxes.forEach(function (checkbox) {\r\n            checkbox.addEventListener(\"click\", function () {\r\n                var itemsCount = itemsCheckboxes.length;\r\n                var selectedItemsCount = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\").length;\r\n\r\n                // Update selectAllCtrl state\r\n                selectAllCtrl.checked = selectedItemsCount === itemsCount;\r\n                selectAllCtrl.indeterminate = selectedItemsCount > 0 && selectedItemsCount < itemsCount;\r\n\r\n                // Update the selected items text\r\n                updateSelectedItemsText();\r\n                displayActionsOrFilters();\r\n            });\r\n        });\r\n\r\n        // Function to update selected items text\r\n        function updateSelectedItemsText() {\r\n            var selectedCount = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\").length;\r\n            selectedItems.textContent = selectedCount + ' ' + selectedLabel;\r\n        }\r\n    }\r\n\r\n    return {\r\n        initialize: initialize\r\n    }\r\n}();\r\n"],"names":["urlRewritingAdmin","initialize","url","errorLabel","selectedLabel","sortingListManager","create","searchBox","document","getElementById","searchAlert","filterElements","querySelectorAll","addEventListener","e","key","preventDefault","search","target","value","toLowerCase","classList","add","i","length","remove","visibleElements","filter","text","getAttribute","indexOf","push","actions","items","filters","selectAllCtrl","selectedItems","itemsCheckboxes","displayActionsOrFilters","checkedCheckboxes","updateSelectedItemsText","selectedCount","textContent","dropdownItems","forEach","item","dataset","action","actionData","Object","assign","confirmDialog","callback","r","querySelector","click","checkbox","checked","itemsCount","selectedItemsCount","indeterminate"],"mappings":"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"}asd