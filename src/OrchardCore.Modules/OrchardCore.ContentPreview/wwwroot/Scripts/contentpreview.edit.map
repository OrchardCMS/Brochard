{"version":3,"sources":["<anon>"],"sourcesContent":["$(function () {\r\n    $(document)\r\n        .on('input', '.content-preview-text', function () {\r\n            $(document).trigger('contentpreview:render');\r\n        })\r\n        .on('propertychange', '.content-preview-text', function () {\r\n            $(document).trigger('contentpreview:render');\r\n        })\r\n        .on('keyup', '.content-preview-text', function (event) {\r\n            // handle backspace\r\n            if (event.keyCode == 46 || event.ctrlKey) {\r\n                $(document).trigger('contentpreview:render');\r\n            }\r\n        })\r\n        .on('change', '.content-preview-select', function () {\r\n            $(document).trigger('contentpreview:render');\r\n        });\r\n});\r\n\r\n\r\n$(function () {\r\n    \r\n    var previewButton, contentItemType, previewId, previewContentItemId, previewContentItemVersionId, form, formData;\r\n\r\n    previewButton = document.getElementById('previewButton');\r\n    contentItemType = $(document.getElementById('contentItemType')).data('value');\r\n    previewId = $(document.getElementById('previewId')).data('value');\r\n    previewContentItemId = $(document.getElementById('previewContentItemId')).data('value');\r\n    previewContentItemVersionId = $(document.getElementById('previewContentItemVersionId')).data('value');\r\n    form = $(previewButton).closest('form');\r\n\r\n    sendFormData = function () {\r\n\r\n        formData = form.serializeArray(); // convert form to array\r\n        formData.push({ name: \"ContentItemType\", value: contentItemType });\r\n        formData.push({ name: \"PreviewId\", value: previewId });\r\n        formData.push({ name: \"PreviewContentItemId\", value: previewContentItemId });\r\n        formData.push({ name: \"PreviewContentItemVersionId\", value: previewContentItemVersionId });\r\n\r\n        // store the form data to pass it in the event handler\r\n        localStorage.setItem('contentpreview:' + previewId, JSON.stringify($.param(formData)));\r\n    }\r\n\r\n    $(document).on('contentpreview:render', function () {\r\n        sendFormData();\r\n    });\r\n\r\n\r\n    $(window).on('storage', function (ev) {\r\n        if (ev.originalEvent.key != 'contentpreview:ready:' + previewId) return; // ignore other keys\r\n\r\n        // triggered by the preview window the first time it is loaded in order\r\n        // to pre-render the view even if no contentpreview:render is already sent\r\n        sendFormData();\r\n    });    \r\n\r\n    $(window).on('unload', function () {\r\n        localStorage.removeItem('contentpreview:' + previewId);\r\n        // this will raise an event in the preview window to notify that the live preview is no longer active.\r\n        localStorage.setItem('contentpreview:not-connected:' + previewId, '');\r\n        localStorage.removeItem('contentpreview:not-connected:' + previewId);\r\n    });\r\n});\r\n"],"names":["$","document","on","trigger","event","keyCode","ctrlKey","previewButton","contentItemType","previewId","previewContentItemId","previewContentItemVersionId","form","formData","getElementById","data","closest","sendFormData","serializeArray","push","name","value","localStorage","setItem","JSON","stringify","param","window","ev","originalEvent","key","removeItem"],"mappings":"AAAAA,EAAE,WACEA,EAAEC,UACGC,EAAE,CAAC,QAAS,wBAAyB,WAClCF,EAAEC,UAAUE,OAAO,CAAC,wBACxB,GACCD,EAAE,CAAC,iBAAkB,wBAAyB,WAC3CF,EAAEC,UAAUE,OAAO,CAAC,wBACxB,GACCD,EAAE,CAAC,QAAS,wBAAyB,SAAUE,CAAK,EAE7CA,CAAAA,AAAiB,IAAjBA,EAAMC,OAAO,EAAUD,EAAME,OAAO,AAAD,GACnCN,EAAEC,UAAUE,OAAO,CAAC,wBAE5B,GACCD,EAAE,CAAC,SAAU,0BAA2B,WACrCF,EAAEC,UAAUE,OAAO,CAAC,wBACxB,EACR,GAGAH,EAAE,WAEE,IAAIO,EAAeC,EAAiBC,EAAWC,EAAsBC,EAA6BC,EAAMC,EAExGN,EAAgBN,SAASa,cAAc,CAAC,iBACxCN,EAAkBR,EAAEC,SAASa,cAAc,CAAC,oBAAoBC,IAAI,CAAC,SACrEN,EAAYT,EAAEC,SAASa,cAAc,CAAC,cAAcC,IAAI,CAAC,SACzDL,EAAuBV,EAAEC,SAASa,cAAc,CAAC,yBAAyBC,IAAI,CAAC,SAC/EJ,EAA8BX,EAAEC,SAASa,cAAc,CAAC,gCAAgCC,IAAI,CAAC,SAC7FH,EAAOZ,EAAEO,GAAeS,OAAO,CAAC,QAEhCC,aAAe,WAGXJ,AADAA,CAAAA,EAAWD,EAAKM,cAAc,EAAC,EACtBC,IAAI,CAAC,CAAEC,KAAM,kBAAmBC,MAAOb,CAAgB,GAChEK,EAASM,IAAI,CAAC,CAAEC,KAAM,YAAaC,MAAOZ,CAAU,GACpDI,EAASM,IAAI,CAAC,CAAEC,KAAM,uBAAwBC,MAAOX,CAAqB,GAC1EG,EAASM,IAAI,CAAC,CAAEC,KAAM,8BAA+BC,MAAOV,CAA4B,GAGxFW,aAAaC,OAAO,CAAC,kBAAoBd,EAAWe,KAAKC,SAAS,CAACzB,EAAE0B,KAAK,CAACb,IAC/E,EAEAb,EAAEC,UAAUC,EAAE,CAAC,wBAAyB,WACpCe,cACJ,GAGAjB,EAAE2B,QAAQzB,EAAE,CAAC,UAAW,SAAU0B,CAAE,EAC5BA,EAAGC,aAAa,CAACC,GAAG,EAAI,wBAA0BrB,GAItDQ,cACJ,GAEAjB,EAAE2B,QAAQzB,EAAE,CAAC,SAAU,WACnBoB,aAAaS,UAAU,CAAC,kBAAoBtB,GAE5Ca,aAAaC,OAAO,CAAC,gCAAkCd,EAAW,IAClEa,aAAaS,UAAU,CAAC,gCAAkCtB,EAC9D,EACJ"}