{"version":3,"sources":["<anon>"],"sourcesContent":["var editor;\r\n\r\nfunction initializeTemplatePreview(nameElement, editorElement) {\r\n\r\n    var antiforgerytoken = $(\"[name='__RequestVerificationToken']\").val();\r\n\r\n    sendFormData = function (nameElement) {\r\n\r\n        var formData = {\r\n            'Name': nameElement.value,\r\n            'Content': editor.getValue(),\r\n            '__RequestVerificationToken': antiforgerytoken\r\n        };\r\n\r\n        // store the form data to pass it in the event handler\r\n        localStorage.setItem('OrchardCore.templates', JSON.stringify($.param(formData)));\r\n    }\r\n\r\n    editor = CodeMirror.fromTextArea(editorElement, {\r\n        autoRefresh: true,\r\n        lineNumbers: true,\r\n        lineWrapping: true,\r\n        matchBrackets: true,\r\n        styleActiveLine: true,\r\n        mode: { name: \"liquid\" },\r\n        extraKeys: {\r\n            \"F11\": function (cm) {\r\n                cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\"));\r\n            },\r\n            \"Esc\": function (cm) {\r\n                if (cm.getOption(\"fullScreen\")) cm.setOption(\"fullScreen\", false);\r\n            }\r\n        }\r\n    });\r\n\r\n    editor.on('change', function (cm) {\r\n        sendFormData(nameElement);\r\n    });\r\n\r\n    window.addEventListener('storage', function (ev) {\r\n        if (ev.key != 'OrchardCore.templates:ready') return; // ignore other keys\r\n\r\n        // triggered by the preview window the first time it is loaded in order\r\n        // to pre-render the view even if no contentpreview:render is already sent\r\n        sendFormData(nameElement);\r\n    }, false);\r\n\r\n    $(nameElement)\r\n        .on('input', function () { sendFormData(nameElement); })\r\n        .on('propertychange', function () { sendFormData(nameElement); })\r\n        .on('change', function () { sendFormData(nameElement); })\r\n        .on('keyup', function (event) {\r\n            // handle backspace\r\n            if (event.keyCode == 46 || event.ctrlKey) {\r\n                sendFormData(nameElement);\r\n            }\r\n        });\r\n\r\n    $(window).on('unload', function () {\r\n        localStorage.removeItem('OrchardCore.templates');\r\n        // this will raise an event in the preview window to notify that the live preview is no longer active.\r\n        localStorage.setItem('OrchardCore.templates:not-connected', '');\r\n        localStorage.removeItem('OrchardCore.templates:not-connected');\r\n   });\r\n}\r\n"],"names":["editor","initializeTemplatePreview","nameElement","editorElement","antiforgerytoken","$","val","sendFormData","formData","value","getValue","localStorage","setItem","JSON","stringify","param","CodeMirror","fromTextArea","autoRefresh","lineNumbers","lineWrapping","matchBrackets","styleActiveLine","mode","name","extraKeys","cm","setOption","getOption","on","window","addEventListener","ev","key","event","keyCode","ctrlKey","removeItem"],"mappings":"AAAA,IAAIA,OAEJ,SAASC,0BAA0BC,CAAW,CAAEC,CAAa,EAEzD,IAAIC,EAAmBC,EAAE,uCAAuCC,GAAG,GAEnEC,aAAe,SAAUL,CAAW,EAEhC,IAAIM,EAAW,CACX,KAAQN,EAAYO,KAAK,CACzB,QAAWT,OAAOU,QAAQ,GAC1B,2BAA8BN,CAClC,EAGAO,aAAaC,OAAO,CAAC,wBAAyBC,KAAKC,SAAS,CAACT,EAAEU,KAAK,CAACP,IACzE,EAmBAR,AAjBAA,CAAAA,OAASgB,WAAWC,YAAY,CAACd,EAAe,CAC5Ce,YAAa,CAAA,EACbC,YAAa,CAAA,EACbC,aAAc,CAAA,EACdC,cAAe,CAAA,EACfC,gBAAiB,CAAA,EACjBC,KAAM,CAAEC,KAAM,QAAS,EACvBC,UAAW,CACP,IAAO,SAAUC,CAAE,EACfA,EAAGC,SAAS,CAAC,aAAc,CAACD,EAAGE,SAAS,CAAC,cAC7C,EACA,IAAO,SAAUF,CAAE,EACXA,EAAGE,SAAS,CAAC,eAAeF,EAAGC,SAAS,CAAC,aAAc,CAAA,EAC/D,CACJ,CACJ,EAAC,EAEME,EAAE,CAAC,SAAU,SAAUH,CAAE,EAC5BnB,aAAaL,EACjB,GAEA4B,OAAOC,gBAAgB,CAAC,UAAW,SAAUC,CAAE,EAC7B,+BAAVA,EAAGC,GAAG,EAIV1B,aAAaL,EACjB,EAAG,CAAA,GAEHG,EAAEH,GACG2B,EAAE,CAAC,QAAS,WAActB,aAAaL,EAAc,GACrD2B,EAAE,CAAC,iBAAkB,WAActB,aAAaL,EAAc,GAC9D2B,EAAE,CAAC,SAAU,WAActB,aAAaL,EAAc,GACtD2B,EAAE,CAAC,QAAS,SAAUK,CAAK,EAEpBA,CAAAA,AAAiB,IAAjBA,EAAMC,OAAO,EAAUD,EAAME,OAAO,AAAD,GACnC7B,aAAaL,EAErB,GAEJG,EAAEyB,QAAQD,EAAE,CAAC,SAAU,WACnBlB,aAAa0B,UAAU,CAAC,yBAExB1B,aAAaC,OAAO,CAAC,sCAAuC,IAC5DD,aAAa0B,UAAU,CAAC,sCAC7B,EACH"}asd