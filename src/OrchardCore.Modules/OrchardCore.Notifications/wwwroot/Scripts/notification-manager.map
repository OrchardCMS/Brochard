{"version":3,"sources":["<anon>"],"sourcesContent":["notificationManager = function () {\r\n\r\n    const removeItem = (values, value) => {\r\n        const index = values.indexOf(value);\r\n\r\n        if (index > -1) {\r\n            values.splice(index, 1);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    const initialize = (readUrl, wrapperSelector) => {\r\n\r\n        if (!readUrl) {\r\n            console.log('No readUrl was provided.');\r\n\r\n            return;\r\n        }\r\n\r\n        const reading = [];\r\n\r\n        var elements = document.getElementsByClassName('mark-notification-as-read');\r\n\r\n        for (let i = 0; i < elements.length; i++) {\r\n\r\n            ['click', 'mouseover'].forEach((evt) => {\r\n                elements[i].addEventListener(evt, (e) => {\r\n\r\n                    if (e.target.getAttribute('data-is-read') != \"false\") {\r\n                        return;\r\n                    }\r\n\r\n                    var messageId = e.target.getAttribute('data-message-id');\r\n\r\n                    if (!messageId) {\r\n                        return;\r\n                    }\r\n\r\n                    if (reading.includes(messageId)) {\r\n                        // If a message is pending request, no need to send another request.\r\n                        return;\r\n                    }\r\n\r\n                    reading.push(messageId);\r\n\r\n                    fetch(readUrl, {\r\n                        method: 'POST',\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                        body: JSON.stringify({ messageId: messageId })\r\n                    }).then(response => response.json())\r\n                        .then(result => {\r\n                            if (result.updated) {\r\n                                if (wrapperSelector) {\r\n                                    var wrapper = e.target.closest(wrapperSelector);\r\n                                    if (wrapper) {\r\n                                        wrapper.classList.remove('notification-is-unread');\r\n                                        wrapper.classList.add('notification-is-read');\r\n                                        wrapper.setAttribute('data-is-read', true);\r\n                                        removeItem(reading, messageId);\r\n                                    }\r\n                                } else {\r\n                                    e.target.classList.remove('notification-is-unread');\r\n                                    e.target.classList.add('notification-is-read');\r\n                                    e.target.setAttribute('data-is-read', true);\r\n                                    removeItem(reading, messageId);\r\n                                }\r\n                            }\r\n\r\n                            var targetUrl = e.target.getAttribute('data-target-url');\r\n\r\n                            if (targetUrl) {\r\n                                window.location.href = targetUrl;\r\n                            }\r\n                        });\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    return {\r\n        initializeContainer: initialize\r\n    };\r\n}();\r\n"],"names":["notificationManager","removeItem","values","value","index","indexOf","splice","initializeContainer","readUrl","wrapperSelector","console","log","reading","elements","document","getElementsByClassName","i","length","forEach","evt","addEventListener","e","target","getAttribute","messageId","includes","push","fetch","method","headers","body","JSON","stringify","then","response","json","result","updated","wrapper","closest","classList","remove","add","setAttribute","targetUrl","window","location","href"],"mappings":"AAAAA,oBAAsB,WAElB,IAAMC,EAAa,CAACC,EAAQC,KACxB,IAAMC,EAAQF,EAAOG,OAAO,CAACF,UAE7B,AAAIC,EAAQ,KACRF,EAAOI,MAAM,CAACF,EAAO,GAEd,CAAA,EAIf,EAwEA,MAAO,CACHG,oBAvEe,CAACC,EAASC,KAEzB,GAAI,CAACD,EAAS,CACVE,QAAQC,GAAG,CAAC,4BAEZ,MACJ,CAEA,IAAMC,EAAU,EAAE,CAElB,IAAIC,EAAWC,SAASC,sBAAsB,CAAC,6BAE/C,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAASI,MAAM,CAAED,IAEjC,CAAC,QAAS,YAAY,CAACE,OAAO,CAAC,AAACC,IAC5BN,CAAQ,CAACG,EAAE,CAACI,gBAAgB,CAACD,EAAK,AAACE,IAE/B,GAAIA,AAAyC,SAAzCA,EAAEC,MAAM,CAACC,YAAY,CAAC,iBAI1B,IAAIC,EAAYH,EAAEC,MAAM,CAACC,YAAY,CAAC,kBAElC,EAACC,GAIDZ,EAAQa,QAAQ,CAACD,KAKrBZ,EAAQc,IAAI,CAACF,GAEbG,MAAMnB,EAAS,CACXoB,OAAQ,OACRC,QAAS,CACL,eAAgB,kBACpB,EACAC,KAAMC,KAAKC,SAAS,CAAC,CAAER,UAAWA,CAAU,EAChD,GAAGS,IAAI,CAACC,GAAYA,EAASC,IAAI,IAC5BF,IAAI,CAACG,IACF,GAAIA,EAAOC,OAAO,EACd,GAAI5B,EAAiB,CACjB,IAAI6B,EAAUjB,EAAEC,MAAM,CAACiB,OAAO,CAAC9B,GAC3B6B,IACAA,EAAQE,SAAS,CAACC,MAAM,CAAC,0BACzBH,EAAQE,SAAS,CAACE,GAAG,CAAC,wBACtBJ,EAAQK,YAAY,CAAC,eAAgB,CAAA,GACrC1C,EAAWW,EAASY,GAE5B,MACIH,EAAEC,MAAM,CAACkB,SAAS,CAACC,MAAM,CAAC,0BAC1BpB,EAAEC,MAAM,CAACkB,SAAS,CAACE,GAAG,CAAC,wBACvBrB,EAAEC,MAAM,CAACqB,YAAY,CAAC,eAAgB,CAAA,GACtC1C,EAAWW,EAASY,GAI5B,IAAIoB,EAAYvB,EAAEC,MAAM,CAACC,YAAY,CAAC,mBAElCqB,GACAC,CAAAA,OAAOC,QAAQ,CAACC,IAAI,CAAGH,CAAQ,CAEvC,IACR,EACJ,EAER,CAIA,CACJ"}asd