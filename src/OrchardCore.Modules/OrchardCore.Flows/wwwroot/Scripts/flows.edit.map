{"version":3,"sources":["<anon>"],"sourcesContent":["//variables used in FlowPart.Edit sortable\r\nvar widgetDragItem, lastContainer, widgetItemSourceId, widgetItemDestId;\r\n\r\n$(function () {\r\n    $(document).on('click', '.add-widget', function (event) {\r\n        var type = $(this).data(\"widget-type\");\r\n        var targetId = $(this).data(\"target-id\");\r\n        var htmlFieldPrefix = $(this).data(\"html-field-prefix\");\r\n        var createEditorUrl = $('#' + targetId).data(\"buildeditorurl\");\r\n        var prefixesName = $(this).data(\"prefixes-name\");\r\n        var flowmetadata = $(this).data(\"flowmetadata\");\r\n        var parentContentType = $(this).data(\"parent-content-type\");\r\n        var partName = $(this).data(\"part-name\");\r\n\r\n        // Retrieve all index values knowing that some elements may have been moved / removed.\r\n        var indexes = $('#' + targetId).closest(\"form\").find(\"input[name*='Prefixes']\")\r\n            .filter(function (i, e) {\r\n                return $(e).val().substring(0, $(e).val().lastIndexOf('-')) === htmlFieldPrefix;\r\n            })\r\n            .map(function (i, e) {\r\n                return parseInt($(e).val().substring($(e).val().lastIndexOf('-') + 1)) || 0;\r\n            });\r\n\r\n        // Use a prefix based on the items count (not a guid) so that the browser autofill still works.\r\n        var index = indexes.length ? Math.max(...indexes) + 1 : 0;\r\n        var prefix = htmlFieldPrefix + '-' + index.toString();\r\n\r\n        var contentTypesName = $(this).data(\"contenttypes-name\");\r\n        var contentItemsName = $(this).data(\"contentitems-name\");\r\n        $.ajax({\r\n            url: createEditorUrl + \"?id=\" + type + \"&prefix=\" + prefix + \"&prefixesName=\" + prefixesName + \"&contentTypesName=\" + contentTypesName + \"&contentItemsName=\" + contentItemsName + \"&targetId=\" + targetId + \"&flowmetadata=\" + flowmetadata + \"&parentContentType=\" + parentContentType + \"&partName=\" + partName\r\n        }).done(function (data) {\r\n            var result = JSON.parse(data);\r\n            $(document.getElementById(targetId)).append(result.Content);\r\n\r\n            var dom = $(result.Scripts);\r\n            dom.filter('script').each(function () {\r\n                $.globalEval(this.text || this.textContent || this.innerHTML || '');\r\n            });\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.insert-widget', function (event) {\r\n        var type = $(this).data(\"widget-type\");\r\n        var target = $(this).closest('.widget-template');\r\n        var targetId = $(this).data(\"target-id\");\r\n        var htmlFieldPrefix = $(this).data(\"html-field-prefix\");\r\n        var createEditorUrl = $('#' + targetId).data(\"buildeditorurl\");\r\n        var flowmetadata = $(this).data(\"flowmetadata\");\r\n        var prefixesName = $(this).data(\"prefixes-name\");\r\n        var parentContentType = $(this).data(\"parent-content-type\");\r\n        var partName = $(this).data(\"part-name\");\r\n\r\n        // Retrieve all index values knowing that some elements may have been moved / removed.\r\n        var indexes = $('#' + targetId).closest(\"form\").find(\"input[name*='Prefixes']\")\r\n            .filter(function (i, e) {\r\n                return $(e).val().substring(0, $(e).val().lastIndexOf('-')) === htmlFieldPrefix;\r\n            })\r\n            .map(function (i, e) {\r\n                return parseInt($(e).val().substring($(e).val().lastIndexOf('-') + 1)) || 0;\r\n            });\r\n\r\n        // Use a prefix based on the items count (not a guid) so that the browser autofill still works.\r\n        var index = indexes.length ? Math.max(...indexes) + 1 : 0;\r\n        var prefix = htmlFieldPrefix + '-' + index.toString();\r\n\r\n        var contentTypesName = $(this).data(\"contenttypes-name\");\r\n        var contentItemsName = $(this).data(\"contentitems-name\");\r\n        $.ajax({\r\n            url: createEditorUrl + \"?id=\" + type + \"&prefix=\" + prefix + \"&prefixesName=\" + prefixesName + \"&contentTypesName=\" + contentTypesName + \"&contentItemsName=\" + contentItemsName + \"&targetId=\" + targetId + \"&flowmetadata=\" + flowmetadata + \"&parentContentType=\" + parentContentType + \"&partName=\" + partName\r\n        }).done(function (data) {\r\n            var result = JSON.parse(data);\r\n            $(result.Content).insertBefore(target);\r\n\r\n            var dom = $(result.Scripts);\r\n            dom.filter('script').each(function () {\r\n                $.globalEval(this.text || this.textContent || this.innerHTML || '');\r\n            });\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.widget-delete', function () {\r\n        var $this = $(this);\r\n        confirmDialog({\r\n            ...$this.data(), callback: function (r) {\r\n                if (r) {\r\n                    $this.closest('.widget-template').remove();\r\n                    $(document).trigger('contentpreview:render');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('change', '.widget-editor-footer label, .widget-editor-header label', function () {\r\n\r\n        var $tmpl = $(this).closest('.widget-template');\r\n        var $radio = $(this).find(\"input:first-child\");\r\n        if ($radio[0].id !== 'undefined' && $radio[0].id.indexOf('Size') > 0) {\r\n            var $radioSize = $(this).find(\"input:first-child\").val();\r\n            var classList = $tmpl.attr('class').split(' ');\r\n            $.each(classList, function (id, item) {\r\n                if (item.indexOf('col-md-') === 0) $tmpl.removeClass(item);\r\n            });\r\n            var colSize = Math.round($radioSize / 100 * 12);\r\n            $tmpl.addClass('col-md-' + colSize);\r\n\r\n            var dropdown = $(this).closest('.dropdown-menu');\r\n            dropdown.prev('button').text($radioSize + '%');\r\n        } else if ($radio[0].id !== 'undefined' && $radio[0].id.indexOf('Alignment') > 0) {\r\n            var svg = $(this).find('svg')[0].outerHTML;\r\n            var alignDropdown = $(this).closest('.dropdown-menu');\r\n            var $btn = alignDropdown.prev('button');\r\n            $btn.html(svg);\r\n        }\r\n\r\n        $(this).parent().find('.dropdown-item').removeClass('active');\r\n        $(this).toggleClass('active');\r\n        $(document).trigger('contentpreview:render');\r\n    });\r\n\r\n    $(document).on('click', '.widget-editor-btn-toggle', function () {\r\n        $(this).closest('.widget-editor').toggleClass('collapsed');\r\n    });\r\n\r\n    $(document).on('keyup', '.widget-editor-body .form-group input.content-caption-text', function () {\r\n        var headerTextLabel = $(this).closest('.widget-editor').find('.widget-editor-header:first .widget-editor-header-text');\r\n        var contentTypeDisplayText = headerTextLabel.data('content-type-display-text');\r\n        var title = $(this).val();\r\n        var newDisplayText = title + ' ' + contentTypeDisplayText;\r\n\r\n        headerTextLabel.text(newDisplayText);\r\n    });\r\n});\r\n"],"names":["widgetDragItem","lastContainer","widgetItemSourceId","widgetItemDestId","$","document","on","event","type","data","targetId","htmlFieldPrefix","createEditorUrl","prefixesName","flowmetadata","parentContentType","partName","indexes","closest","find","filter","i","e","val","substring","lastIndexOf","map","parseInt","prefix","index","length","Math","max","toString","contentTypesName","contentItemsName","ajax","url","done","result","JSON","parse","getElementById","append","Content","dom","Scripts","each","globalEval","text","textContent","innerHTML","target","insertBefore","$this","confirmDialog","callback","r","remove","trigger","$tmpl","$radio","id","indexOf","$radioSize","classList","attr","split","item","removeClass","addClass","round","dropdown","prev","svg","outerHTML","$btn","alignDropdown","html","parent","toggleClass","headerTextLabel","contentTypeDisplayText","title"],"mappings":"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"}
