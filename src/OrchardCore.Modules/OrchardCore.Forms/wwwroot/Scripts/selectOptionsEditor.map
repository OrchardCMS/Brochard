{"version":3,"sources":["<anon>"],"sourcesContent":["selectOptionsEditor = function () {\n\r\n    const initilize = (elemId, optionsData, defaultValue) => {\r\n        var keyId = 1;\r\n        //Add Key ID\r\n        optionsData = optionsData.map((x) => {\r\n            x.key = keyId;\r\n            keyId++;\r\n            return x;\r\n        });\r\n\r\n        var selectOptionsRow = {\r\n            name: \"select-options-row\",\r\n            template: \"#select-options-row\",\r\n            props: [\"option\", \"defaultValue\"],\r\n            data: function () {\r\n                return {\r\n                    partId: elemId,\r\n                };\r\n            },\r\n            methods: {\r\n                remove: function () {\r\n                    this.$emit(\"remove-option\", this.option);\r\n                },\r\n            },\r\n            computed: {\r\n                IsSelected: {\r\n                    get: function () {\r\n                        if (!IsNullOrWhiteSpace(this.option.value)) {\r\n                            return this.option.value == this.defaultValue;\r\n                        } else {\r\n                            return this.option.text == this.defaultValue;\r\n                        }\r\n                    },\r\n                    set: function (val) {\r\n                        if (val) {\r\n                            this.$emit(\"set-default\", this.option);\r\n                        } else {\r\n                            this.$emit(\"set-default\", null);\r\n                        }\r\n                    },\r\n                },\r\n                optionValue: {\r\n                    get: function () {\r\n                        return this.option.value;\r\n                    },\r\n                    set: function (val) {\r\n                        var isSelected = this.IsSelected;\r\n                        this.option.value = val;\r\n                        if (isSelected) {\r\n                            this.$emit(\"set-default\", this.option);\r\n                        } else {\r\n                            this.$emit(\"reorder-option\");\r\n                        }\r\n                    },\r\n                },\r\n\r\n                optionText: {\r\n                    get: function () {\r\n                        return this.option.text;\r\n                    },\r\n                    set: function (val) {\r\n                        var isSelected = this.IsSelected;\r\n                        this.option.text = val;\r\n                        if (isSelected) {\r\n                            this.$emit(\"set-default\", this.option);\r\n                        } else {\r\n                            this.$emit(\"reorder-option\");\r\n                        }\r\n                    },\r\n                },\r\n\r\n                optionCheck: {\r\n                    get: function () {\r\n                        if (IsNullOrWhiteSpace(this.option.value)) {\r\n                            return this.option.text;\r\n                        } else {\r\n                            return this.option.value;\r\n                        }\r\n                    },\r\n                },\r\n            },\r\n        };\r\n\r\n        var selectOptionsTable = {\r\n            name: \"select-options-table\",\r\n            components: {\r\n                selectOptionsRow: selectOptionsRow,\r\n            },\r\n            template: \"#select-options-table\",\r\n            props: [\"data\"],\r\n            data: function () {\r\n                return {\r\n                    partId: elemId,\r\n                };\r\n            },\r\n            methods: {\r\n                add: function () {\r\n                    this.$emit(\"add-option\");\r\n                },\r\n                onDragEnd: function () {\r\n                    this.$emit(\"reorder-option\");\r\n                },\r\n            },\r\n        };\r\n\r\n        var selectOptionsModal = {\r\n            name: \"select-options-modal\",\r\n            template: \"#select-options-modal\",\r\n            props: [\"data\", \"showModal\", \"validOptions\"],\r\n            data: function () {\r\n                return {\r\n                    optionsFormattedList: \"[]\",\r\n                    partId: elemId,\r\n                    defaultValue: \"\",\r\n                    isValid: false,\r\n                    jsonOptions: [],\r\n                };\r\n            },\r\n            methods: {\r\n                closeModal: function (save) {\r\n                    if (save) {\r\n                        this.$emit(\"modal-save\", {\r\n                            options: this.jsonOptions,\r\n                            defaultValue: this.defaultValue,\r\n                        });\r\n                    } else {\r\n                        this.$emit(\"modal-cancel\");\r\n                    }\r\n                },\r\n                showStart: function (params) {\r\n                    this.$refs.modal.classList.toggle('d-block');\r\n                    this.$refs.backdrop.classList.toggle('d-block');\r\n                },\r\n                showEnd: function (params) {\r\n                    this.$refs.modal.classList.toggle('show');\r\n                    this.$refs.backdrop.classList.toggle('show');\r\n                }\r\n            },\r\n            watch: {\r\n                showModal: function (newval) {\r\n                    if (newval) {\r\n\r\n                        this.optionsFormattedList = JSON.stringify(\r\n                            this.validOptions,\r\n                            null,\r\n                            2\r\n                        );\r\n                        this.defaultValue = this.data.defaultValue;\r\n                    } else {\r\n                        this.optionsFormattedList = \"[]\";\r\n                        this.defaultValue = \"\";\r\n                    }\r\n                },\r\n                optionsFormattedList: function (newval) {\r\n                    try {\r\n                        var parsed = JSON.parse(newval);\r\n                        if (!!newval && parsed instanceof Array) {\r\n                            this.jsonOptions = parsed;\r\n                            this.isValid = true;\r\n                        } else {\r\n                            this.isValid = false;\r\n                        }\r\n                    } catch (e) {\r\n                        this.isValid = false;\r\n                    }\r\n                },\r\n            },\r\n        };\r\n\r\n        new Vue({\r\n            components: {\r\n                selectOptionsTable: selectOptionsTable,\r\n                selectOptionsModal: selectOptionsModal,\r\n            },\r\n            data: function () {\r\n                return {\r\n                    state: {\r\n                        options: optionsData,\r\n                        defaultValue: defaultValue,\r\n                        partId: elemId,\r\n                    },\r\n                    debounceTimeout: null,\r\n                    showModal: false,\r\n                };\r\n            },\r\n            el: \"#\" + elemId,\r\n            methods: {\r\n                cancelChanges: function () {\r\n                    this.showModal = false;\r\n                },\r\n                updateChanges: function (changes) {\r\n                    this.state.options = changes.options\r\n                        .filter(function (y) {\r\n                            return !IsNullOrWhiteSpace(y.text);\r\n                        })\r\n                        .map(function (x) {\r\n                            x.key = keyId++;\r\n                            return x;\r\n                        });\r\n                    this.state.defaultValue = changes.defaultValue;\r\n                    this.showModal = false;\r\n                    this.debouncePreview();\r\n                },\r\n                setDefaultValue: function (opt) {\r\n                    if (opt == null) {\r\n                        this.state.defaultValue = \"\";\r\n                    } else {\r\n                        if (!IsNullOrWhiteSpace(opt.value)) {\r\n                            this.state.defaultValue = opt.value;\r\n                        } else {\r\n                            this.state.defaultValue = opt.text;\r\n                        }\r\n                    }\r\n                    this.debouncePreview();\r\n                },\r\n                addOption: function () {\r\n                    this.state.options.push({\r\n                        text: \"\",\r\n                        value: \"\",\r\n                        key: keyId++,\r\n                    });\r\n                    this.debouncePreview();\r\n                },\r\n                removeOption: function (opt) {\r\n                    var index = this.state.options.findIndex(function (c) {\r\n                        return c.key == opt.key;\r\n                    });\r\n                    if (index > -1) {\r\n                        this.state.options.splice(index, 1);\r\n                        this.debouncePreview();\r\n                    }\r\n                },\r\n                reorderOption: function (evt) {\r\n                    this.debouncePreview();\r\n                },\r\n                debouncePreview: function (params) {\r\n                    if (this.debounceTimeout) clearTimeout(this.debounceTimeout);\r\n                    this.debounceTimeout = setTimeout(() => {\r\n                        const previewEvent = new Event(\"contentpreview:render\");\r\n                        document.dispatchEvent(previewEvent);\r\n                    }, 500);\r\n                },\r\n            },\r\n            computed: {\r\n                stringify: function () {\r\n                    return JSON.stringify(this.validOptions);\r\n                },\r\n                validOptions: function () {\r\n                    return this.state.options\r\n                        .map(function (x) {\r\n                            return {\r\n                                text: x.text,\r\n                                value: x.value,\r\n                            };\r\n                        })\r\n                        .filter(function (x) {\r\n                            return !IsNullOrWhiteSpace(x.text);\r\n                        });\r\n                },\r\n            },\r\n        });\r\n\r\n        function IsNullOrWhiteSpace(str) {\r\n            return str == null || str.match(/^ *$/) !== null;\r\n        }\r\n    };\r\n\r\n    const initilizeElement = (id, options, value) => {\r\n        var wrapper = document.getElementById(id);\r\n\r\n        if (wrapper != null) {\r\n            initilize(id, options, value);\r\n        }\r\n    }\r\n\r\n    const initilizeFieldType = (wrapper) => {\r\n        var selectMenus = wrapper.getElementsByClassName('field-type-select-menu');\r\n        for (let i = 0; i < selectMenus.length; i++) {\r\n            var selectMenu = selectMenus[i];\r\n            selectMenu.addEventListener('change', function (e) {\r\n                var visibleForInputContainers = wrapper.getElementsByClassName('show-for-input');\r\n\r\n                for (let i = 0; i < visibleForInputContainers.length; i++) {\r\n                    var container = visibleForInputContainers[i];\r\n                    if (e.target.value == 'reset' || e.target.value == 'submit' || e.target.value == 'hidden') {\r\n                        container.classList.add('d-none');\r\n                    } else {\r\n                        container.classList.remove('d-none');\r\n                    }\r\n                }\r\n            });\r\n            selectMenu.dispatchEvent(new Event('change'));\r\n        }\r\n    };\r\n\r\n    return {\r\n        initilizeElement: initilizeElement,\r\n        initilizeFieldType: initilizeFieldType\r\n    };\r\n}();\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    var wrappers = document.getElementsByName('select-part-properties-wrapper');\r\n\r\n    for (let i = 0; i < wrappers.length; i++) {\r\n        var wrapper = wrappers[i];\r\n\r\n        var fieldWrapper = wrapper.querySelector('.field-options-wrapper');\r\n\r\n        if (fieldWrapper != null) {\r\n            var initialDefaultValue = fieldWrapper.querySelector('.field-options-wrapper-initial-default-value');\r\n            var initialOptions = fieldWrapper.querySelector('.field-options-wrapper-initial-options');\r\n\r\n            selectOptionsEditor.initilizeElement(fieldWrapper.Id, initialOptions.innerHTML, initialDefaultValue.value)\r\n        }\r\n    }\r\n\r\n    selectOptionsEditor.initilizeFieldType(document);\r\n});\r\n"],"names":["selectOptionsEditor","initilize","elemId","optionsData","defaultValue","keyId","IsNullOrWhiteSpace","str","match","map","x","key","Vue","components","selectOptionsTable","name","selectOptionsRow","template","props","data","partId","methods","remove","$emit","option","computed","IsSelected","get","value","text","set","val","optionValue","isSelected","optionText","optionCheck","add","onDragEnd","selectOptionsModal","optionsFormattedList","isValid","jsonOptions","closeModal","save","options","showStart","params","$refs","modal","classList","toggle","backdrop","showEnd","watch","showModal","newval","JSON","stringify","validOptions","parsed","parse","Array","e","state","debounceTimeout","el","cancelChanges","updateChanges","changes","filter","y","debouncePreview","setDefaultValue","opt","addOption","push","removeOption","index","findIndex","c","splice","reorderOption","evt","clearTimeout","setTimeout","previewEvent","Event","document","dispatchEvent","initilizeElement","id","getElementById","initilizeFieldType","wrapper","selectMenus","getElementsByClassName","i","length","selectMenu","addEventListener","visibleForInputContainers","container","target","wrappers","getElementsByName","fieldWrapper","querySelector","initialDefaultValue","initialOptions","Id","innerHTML"],"mappings":"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"}
