{"version":3,"sources":["<anon>"],"sourcesContent":["function initializeTagsEditor(element) {\r\n    if (element) {\r\n\r\n        var elementId = element.id;\r\n        var vueMultiselect = Vue.component('vue-multiselect', window.VueMultiselect.default);\r\n\r\n        var vm = new Vue({\r\n            el: '#' + elementId,\r\n            components: { 'vue-multiselect': vueMultiselect },\r\n            data: function () {\r\n                // All terms generate a model binding.\r\n                var allTagTerms = JSON.parse(element.dataset.allTagTerms || \"[]\");\r\n\r\n                // Selectable terms are shown in options list.\r\n                var selectableTagTerms = allTagTerms;\r\n\r\n                // Leaves only filters selectableTerms.\r\n                if (element.dataset.leavesOnly == 'true') {\r\n                    selectableTagTerms = selectableTagTerms.filter(function (tagTerm) { return tagTerm.isLeaf });\r\n                    // Self heal when leaves only value is updated.\r\n                    allTagTerms.forEach(function (tagTerm) {\r\n                        if (!selectableTagTerms.includes(tagTerm)) {\r\n                            tagTerm.selected = false;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Selected terms are show in selected tags field.\r\n                selectedTagTerms = allTagTerms.filter(function (tagTerm) { return tagTerm.selected });\r\n\r\n                return {\r\n                    open: element.dataset.open,\r\n                    taxonomyContentItemId: element.dataset.taxonomyContentItemId,\r\n                    createTagUrl: element.dataset.createTagUrl,\r\n                    createTagErrorMessage: element.dataset.createTagErrorMessage,\r\n                    selectedTagTerms: selectedTagTerms,\r\n                    selectableTagTerms: selectableTagTerms,\r\n                    allTagTerms: allTagTerms\r\n                }\r\n            },\r\n            computed: {\r\n                isDisabled: function () {\r\n                    if (this.open == 'false' && this.selectableTagTerms.length === 0) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                },\r\n                selectedTagTermsIds: function() {\r\n                    if (!this.selectedTagTerms) {\r\n                        return [];\r\n                    }\r\n                    if (Array.isArray(this.selectedTagTerms)) {\r\n                        return this.selectedTagTerms.map(function (tagTerm) { return tagTerm.contentItemId });\r\n                    } else {\r\n                        return this.selectedTagTerms.contentItemId;\r\n                    }\r\n                }\r\n            },\r\n            methods: {\r\n                createTagTerm(newTagTerm) {\r\n                    var self = this;\r\n                    $.ajax({\r\n                        url: self.createTagUrl,\r\n                        method: 'POST',\r\n                        data: {\r\n                            __RequestVerificationToken: $(\"input[name='__RequestVerificationToken']\").val(),\r\n                            taxonomyContentItemId: self.taxonomyContentItemId,\r\n                            displayText: newTagTerm\r\n                        },\r\n                        success: function (data) {\r\n                            var tagTerm = {\r\n                                contentItemId: data.contentItemId,\r\n                                displayText: data.displayText,\r\n                                selected: true\r\n                            }\r\n                            // Add to allTagTerms array so model binding will save tag as selected.\r\n                            self.allTagTerms.push(tagTerm);\r\n\r\n                            // Add to selectedTerms to display in vue-multi-select.\r\n                            self.selectedTagTerms.push(tagTerm);\r\n\r\n                        },\r\n                        error: function () {\r\n                            alert(self.createTagErrorMessage);\r\n                        }\r\n                    });\r\n                },\r\n                onSelect(selectedTagTerm) {\r\n                    var tagTerm = this.allTagTerms.find(function (tagTerm) { return tagTerm.contentItemId === selectedTagTerm.contentItemId });\r\n                    tagTerm.selected = true;\r\n                    $(document).trigger('contentpreview:render');\r\n                },\r\n                onRemove(removedTagTerm) {\r\n                    var tagTerm = this.allTagTerms.find(function (tagTerm) { return tagTerm.contentItemId === removedTagTerm.contentItemId });\r\n                    tagTerm.selected = false;\r\n                    $(document).trigger('contentpreview:render');\r\n                }\r\n            }\r\n        });\r\n\r\n        return vm;\r\n    }\r\n}\r\n"],"names":["initializeTagsEditor","element","elementId","id","vueMultiselect","Vue","component","window","VueMultiselect","default","el","components","data","allTagTerms","JSON","parse","dataset","selectableTagTerms","leavesOnly","filter","tagTerm","isLeaf","forEach","includes","selected","selectedTagTerms","open","taxonomyContentItemId","createTagUrl","createTagErrorMessage","computed","isDisabled","length","selectedTagTermsIds","Array","isArray","map","contentItemId","methods","createTagTerm","newTagTerm","self","$","ajax","url","method","__RequestVerificationToken","val","displayText","success","push","error","alert","onSelect","selectedTagTerm","find","document","trigger","onRemove","removedTagTerm"],"mappings":"AAAA,SAASA,qBAAqBC,CAAO,EACjC,GAAIA,EAAS,CAET,IAAIC,EAAYD,EAAQE,EAAE,CACtBC,EAAiBC,IAAIC,SAAS,CAAC,kBAAmBC,OAAOC,cAAc,CAACC,OAAO,EAgGnF,OA9FS,IAAIJ,IAAI,CACbK,GAAI,IAAMR,EACVS,WAAY,CAAE,kBAAmBP,CAAe,EAChDQ,KAAM,WAEF,IAAIC,EAAcC,KAAKC,KAAK,CAACd,EAAQe,OAAO,CAACH,WAAW,EAAI,MAGxDI,EAAqBJ,EAgBzB,MAbkC,QAA9BZ,EAAQe,OAAO,CAACE,UAAU,GAC1BD,EAAqBA,EAAmBE,MAAM,CAAC,SAAUC,CAAO,EAAI,OAAOA,EAAQC,MAAM,AAAC,GAE1FR,EAAYS,OAAO,CAAC,SAAUF,CAAO,EAC5BH,EAAmBM,QAAQ,CAACH,IAC7BA,CAAAA,EAAQI,QAAQ,CAAG,CAAA,CAAI,CAE/B,IAIJC,iBAAmBZ,EAAYM,MAAM,CAAC,SAAUC,CAAO,EAAI,OAAOA,EAAQI,QAAQ,AAAC,GAE5E,CACHE,KAAMzB,EAAQe,OAAO,CAACU,IAAI,CAC1BC,sBAAuB1B,EAAQe,OAAO,CAACW,qBAAqB,CAC5DC,aAAc3B,EAAQe,OAAO,CAACY,YAAY,CAC1CC,sBAAuB5B,EAAQe,OAAO,CAACa,qBAAqB,CAC5DJ,iBAAkBA,iBAClBR,mBAAoBA,EACpBJ,YAAaA,CACjB,CACJ,EACAiB,SAAU,CACNC,WAAY,iBACJ,AAAa,SAAb,IAAI,CAACL,IAAI,EAAe,AAAmC,IAAnC,IAAI,CAACT,kBAAkB,CAACe,MAAM,AAI9D,EACAC,oBAAqB,kBACjB,AAAK,IAAI,CAACR,gBAAgB,CAGtBS,MAAMC,OAAO,CAAC,IAAI,CAACV,gBAAgB,EAC5B,IAAI,CAACA,gBAAgB,CAACW,GAAG,CAAC,SAAUhB,CAAO,EAAI,OAAOA,EAAQiB,aAAa,AAAC,GAE5E,IAAI,CAACZ,gBAAgB,CAACY,aAAa,CALnC,EAAE,AAOjB,CACJ,EACAC,QAAS,CACLC,cAAcC,CAAU,EACpB,IAAIC,EAAO,IAAI,CACfC,EAAEC,IAAI,CAAC,CACHC,IAAKH,EAAKb,YAAY,CACtBiB,OAAQ,OACRjC,KAAM,CACFkC,2BAA4BJ,EAAE,4CAA4CK,GAAG,GAC7EpB,sBAAuBc,EAAKd,qBAAqB,CACjDqB,YAAaR,CACjB,EACAS,QAAS,SAAUrC,CAAI,EACnB,IAAIQ,EAAU,CACViB,cAAezB,EAAKyB,aAAa,CACjCW,YAAapC,EAAKoC,WAAW,CAC7BxB,SAAU,CAAA,CACd,EAEAiB,EAAK5B,WAAW,CAACqC,IAAI,CAAC9B,GAGtBqB,EAAKhB,gBAAgB,CAACyB,IAAI,CAAC9B,EAE/B,EACA+B,MAAO,WACHC,MAAMX,EAAKZ,qBAAqB,CACpC,CACJ,EACJ,EACAwB,SAASC,CAAe,EAEpBlC,AADc,IAAI,CAACP,WAAW,CAAC0C,IAAI,CAAC,SAAUnC,CAAO,EAAI,OAAOA,EAAQiB,aAAa,GAAKiB,EAAgBjB,aAAa,AAAC,GAChHb,QAAQ,CAAG,CAAA,EACnBkB,EAAEc,UAAUC,OAAO,CAAC,wBACxB,EACAC,SAASC,CAAc,EAEnBvC,AADc,IAAI,CAACP,WAAW,CAAC0C,IAAI,CAAC,SAAUnC,CAAO,EAAI,OAAOA,EAAQiB,aAAa,GAAKsB,EAAetB,aAAa,AAAC,GAC/Gb,QAAQ,CAAG,CAAA,EACnBkB,EAAEc,UAAUC,OAAO,CAAC,wBACxB,CACJ,CACJ,EAGJ,CACJ"}
